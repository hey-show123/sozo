# SOZO App 実装検証ガイド

## 実装完了内容
1. ✅ ストリーク機能：全6アクティビティ完了時のみ更新
2. ✅ AI会話セッションナビゲーション：3段階セッション対応

---

## 🔥 ストリーク機能テスト手順

### テスト準備
```bash
cd sozo_app
flutter run
```

### テスト手順

1. **アプリ起動後、進捗画面を確認**
   - フッターの進捗ボタンをタップ
   - 現在のストリーク数を記録: _____

2. **新しいレッスンを開始**
   - ホーム画面からレッスンを選択
   - 6つのアクティビティが表示されることを確認

3. **部分完了テスト（ストリーク更新されないことを確認）**

   | アクティビティ | 完了後のストリーク | 期待値 | 結果 |
   |------------|--------------|--------|-----|
   | 1. 語彙練習 | | 変化なし | □ |
   | 2. キーフレーズ | | 変化なし | □ |
   | 3. リスニング | | 変化なし | □ |
   | 4. ダイアログ | | 変化なし | □ |
   | 5. 応用練習 | | 変化なし | □ |

4. **全完了テスト（ストリーク更新を確認）**

   | アクティビティ | 完了後のストリーク | 期待値 | 結果 |
   |------------|--------------|--------|-----|
   | 6. AI会話練習 | | +1増加 | □ |

---

## 🤖 AI会話セッションナビゲーションテスト

### A. ホーム画面から起動（従来の動作）

1. **起動方法**
   - フッターのAI会話ボタンをタップ

2. **評価画面の確認**
   ```
   期待される表示:
   ┌─────────────────┬─────────────────┐
   │  もう一度練習    │    ホームへ     │
   └─────────────────┴─────────────────┘
   ```
   - 確認結果: □

### B. レッスンから起動（3セッション対応）

1. **セッション1の完了画面**
   ```
   期待される表示:
   セッション 1 / 3 完了

   ┌─────────┬─────────┬──────────────────┐
   │ もう一度 │  完了   │ 次のセッションへ→│
   └─────────┴─────────┴──────────────────┘
   ```
   - 確認結果: □
   - 「次のセッションへ」でセッション2開始: □

2. **セッション2の完了画面**
   ```
   期待される表示:
   セッション 2 / 3 完了

   ┌─────────┬─────────┬──────────────────┐
   │ もう一度 │  完了   │ 次のセッションへ→│
   └─────────┴─────────┴──────────────────┘
   ```
   - 確認結果: □
   - 「次のセッションへ」でセッション3開始: □

3. **セッション3の完了画面**
   ```
   期待される表示:
   全3セッション完了！

   ┌─────────────────┬──────────────────┐
   │  もう一度練習    │  AI会話を完了    │
   └─────────────────┴──────────────────┘
   ```
   - 確認結果: □
   - 「AI会話を完了」でレッスン画面へ戻る: □

---

## 📝 テスト結果記録

### テスト実施情報
- テスト日時: _______________
- テスト実施者: _______________
- アプリバージョン: _______________

### 総合結果

| 項目 | 結果 | 備考 |
|-----|------|-----|
| ストリーク機能（部分完了で更新なし） | □ Pass / □ Fail | |
| ストリーク機能（全完了で更新） | □ Pass / □ Fail | |
| AI会話（ホーム起動） | □ Pass / □ Fail | |
| AI会話（レッスン起動・3セッション） | □ Pass / □ Fail | |

### 発見した問題
1. _______________
2. _______________
3. _______________

---

## 🚀 アプリ起動コマンド

```bash
# iOS シミュレーター
flutter run -d iPhone

# Android エミュレーター
flutter run -d emulator

# 実機（接続済みの場合）
flutter run

# ホットリロード有効
flutter run --hot
```

## 🛠️ トラブルシューティング

### ビルドエラーが発生した場合
```bash
flutter clean
flutter pub get
flutter run
```

### データベース接続エラーの場合
```bash
cd sozo_app
npx supabase start
npx supabase status
```

### ストリークが更新されない場合の確認点
1. 6つすべてのアクティビティにチェックマークが付いているか
2. user_lesson_progress テーブルで全フラグがtrueになっているか
3. complete_lesson 関数が呼び出されているか（ログ確認）